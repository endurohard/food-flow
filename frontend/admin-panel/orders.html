<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ - FoodFlow</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üì¶</text></svg>">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #f5f7fa;
      color: #2c3e50;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Navbar */
    .navbar {
      background: #ffffff;
      padding: 16px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #e1e8ed;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
    }

    .nav-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .menu-toggle {
      background: none;
      border: none;
      color: #5a6c7d;
      font-size: 24px;
      cursor: pointer;
      padding: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      transition: all 0.3s;
    }

    .menu-toggle:hover {
      background: #f5f7fa;
    }

    .nav-brand {
      font-size: 20px;
      font-weight: 700;
      color: #2c3e50;
      display: flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
    }

    .nav-right {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    /* Sidebar */
    .sidebar {
      position: fixed;
      left: -280px;
      top: 0;
      width: 280px;
      height: 100vh;
      background: #ffffff;
      border-right: 1px solid #e1e8ed;
      transition: left 0.3s ease;
      z-index: 200;
      overflow-y: auto;
      padding-top: 70px;
      box-shadow: 2px 0 8px rgba(0, 0, 0, 0.08);
    }

    .sidebar.open {
      left: 0;
    }

    .sidebar-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(2px);
      z-index: 150;
      display: none;
    }

    .sidebar-overlay.active {
      display: block;
    }

    .sidebar-header {
      padding: 20px;
      border-bottom: 1px solid #e1e8ed;
    }

    .sidebar-title {
      font-size: 14px;
      font-weight: 600;
      color: #8b95a5;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .sidebar-menu {
      padding: 12px 0;
    }

    .sidebar-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 20px;
      color: #5a6c7d;
      text-decoration: none;
      transition: all 0.3s;
      cursor: pointer;
      border-left: 3px solid transparent;
    }

    .sidebar-item:hover {
      background: #f5f7fa;
      color: #2c3e50;
    }

    .sidebar-item.active {
      background: #f0f7ff;
      color: #1e88e5;
      border-left-color: #1e88e5;
    }

    .sidebar-icon {
      font-size: 20px;
      width: 24px;
      text-align: center;
    }

    /* Container */
    .container {
      max-width: 100%;
      margin: 0 auto;
      padding: 20px;
    }

    @media (min-width: 768px) {
      .container {
        padding: 32px;
      }
    }

    .header {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 24px;
    }

    @media (min-width: 768px) {
      .header {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
      }
    }

    .title {
      font-size: 24px;
      font-weight: 700;
      color: #2c3e50;
    }

    @media (min-width: 768px) {
      .title {
        font-size: 32px;
      }
    }

    /* Stats Bar */
    .stats-bar {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 12px;
      margin-bottom: 24px;
    }

    @media (min-width: 768px) {
      .stats-bar {
        gap: 16px;
      }
    }

    .stat-card {
      background: #ffffff;
      border: 1px solid #e1e8ed;
      border-radius: 12px;
      padding: 16px;
      display: flex;
      align-items: center;
      gap: 12px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
    }

    .stat-icon {
      font-size: 24px;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      flex-shrink: 0;
    }

    @media (min-width: 768px) {
      .stat-icon {
        font-size: 32px;
        width: 50px;
        height: 50px;
      }
    }

    .stat-info {
      flex: 1;
      min-width: 0;
    }

    .stat-label {
      color: #8b95a5;
      font-size: 12px;
      margin-bottom: 4px;
    }

    .stat-value {
      font-size: 20px;
      font-weight: 700;
      color: #2c3e50;
    }

    @media (min-width: 768px) {
      .stat-value {
        font-size: 28px;
      }
    }

    /* Controls */
    .controls {
      background: #ffffff;
      border: 1px solid #e1e8ed;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 24px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    @media (min-width: 768px) {
      .controls {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
      }
    }

    .search-box {
      flex: 1;
      max-width: 500px;
    }

    .search-input {
      width: 100%;
      padding: 12px 16px;
      background: #ffffff;
      border: 1px solid #e1e8ed;
      border-radius: 8px;
      color: #2c3e50;
      font-size: 14px;
    }

    .search-input:focus {
      outline: none;
      border-color: #1e88e5;
      box-shadow: 0 0 0 3px rgba(30, 136, 229, 0.1);
    }

    .control-buttons {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
    }

    .btn-primary {
      background: #1e88e5;
      color: white;
    }

    .btn-primary:hover {
      background: #1976d2;
      box-shadow: 0 4px 12px rgba(30, 136, 229, 0.25);
    }

    .btn-success {
      background: #43a047;
      color: white;
    }

    .btn-success:hover {
      background: #388e3c;
      box-shadow: 0 4px 12px rgba(67, 160, 71, 0.25);
    }

    .btn-secondary {
      background: #ffffff;
      color: #5a6c7d;
      border: 1px solid #e1e8ed;
    }

    .btn-secondary:hover {
      background: #f5f7fa;
    }

    .btn-small {
      padding: 6px 12px;
      font-size: 12px;
    }

    /* Kanban Board */
    .kanban-board {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    @media (min-width: 1400px) {
      .kanban-board {
        grid-template-columns: repeat(6, 1fr);
      }
    }

    .kanban-column {
      background: #ffffff;
      border: 1px solid #e1e8ed;
      border-radius: 16px;
      padding: 20px;
      min-height: 600px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
    }

    .column-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 2px solid #e1e8ed;
    }

    .column-title {
      font-size: 14px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .column-count {
      background: #f5f7fa;
      color: #5a6c7d;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 700;
    }

    .cards-container {
      display: flex;
      flex-direction: column;
      gap: 16px;
      min-height: 500px;
    }

    .order-card {
      background: #f5f7fa;
      border-radius: 12px;
      padding: 16px;
      border: 2px solid #e1e8ed;
      cursor: grab;
      transition: all 0.2s;
      position: relative;
    }

    .order-card:hover {
      border-color: #1e88e5;
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(30, 136, 229, 0.15);
    }

    .order-card.dragging {
      opacity: 0.5;
      cursor: grabbing;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: start;
      margin-bottom: 12px;
    }

    .order-number {
      font-size: 20px;
      font-weight: 700;
      color: #1e88e5;
    }

    .order-time {
      font-size: 11px;
      color: #8b95a5;
      text-align: right;
    }

    .time-value {
      display: block;
      font-weight: 600;
      color: #2c3e50;
      margin-top: 2px;
    }

    .customer-info {
      margin-bottom: 12px;
      padding: 12px;
      background: #ffffff;
      border-radius: 8px;
      border-left: 3px solid #1e88e5;
    }

    .customer-name {
      font-size: 15px;
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 4px;
    }

    .customer-phone {
      font-size: 12px;
      color: #8b95a5;
      font-family: monospace;
    }

    .customer-address {
      font-size: 12px;
      color: #5a6c7d;
      margin-top: 4px;
      display: flex;
      align-items: start;
      gap: 6px;
    }

    .order-items {
      margin-bottom: 12px;
    }

    .item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #e1e8ed;
      font-size: 13px;
    }

    .item:last-child {
      border-bottom: none;
    }

    .item-name {
      font-weight: 500;
      color: #2c3e50;
    }

    .item-qty {
      color: #8b95a5;
      margin-left: 6px;
      font-size: 12px;
    }

    .item-price {
      font-weight: 600;
      color: #43a047;
    }

    .card-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid #e1e8ed;
    }

    .order-total {
      font-size: 18px;
      font-weight: 700;
      color: #43a047;
    }

    .card-actions {
      display: flex;
      gap: 8px;
    }

    .action-icon-btn {
      width: 36px;
      height: 36px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      transition: all 0.2s;
    }

    .btn-kitchen {
      background: #8b5cf6;
      color: white;
    }

    .btn-kitchen:hover {
      background: #7c3aed;
      transform: scale(1.1);
    }

    .btn-print {
      background: #1e88e5;
      color: white;
    }

    .btn-print:hover {
      background: #1976d2;
      transform: scale(1.1);
    }

    .btn-cancel {
      background: #e53935;
      color: white;
    }

    .btn-cancel:hover {
      background: #d32f2f;
      transform: scale(1.1);
    }

    .btn-ready {
      background: #43a047;
      color: white;
    }

    .btn-ready:hover {
      background: #388e3c;
      transform: scale(1.1);
    }

    .btn-delivery {
      background: #06b6d4;
      color: white;
    }

    .btn-delivery:hover {
      background: #0891b2;
      transform: scale(1.1);
    }

    .btn-delivered {
      background: #22c55e;
      color: white;
    }

    .btn-delivered:hover {
      background: #16a34a;
      transform: scale(1.1);
    }

    .new-order-badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #e53935;
      color: white;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
        transform: scale(1);
      }
      50% {
        opacity: 0.8;
        transform: scale(1.05);
      }
    }

    .empty-column {
      text-align: center;
      padding: 60px 20px;
      color: #8b95a5;
      font-size: 14px;
    }

    .empty-icon {
      font-size: 48px;
      margin-bottom: 12px;
      opacity: 0.5;
    }

    .comment-badge {
      background: #fb8c00;
      color: white;
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 10px;
      font-weight: 600;
      margin-top: 8px;
      display: inline-block;
    }

    .notification {
      position: fixed;
      top: 80px;
      right: 20px;
      background: #ffffff;
      border: 1px solid #e1e8ed;
      border-radius: 12px;
      padding: 12px 20px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
      z-index: 2000;
      display: none;
      animation: slideIn 0.3s ease-out;
      max-width: calc(100% - 40px);
      color: #2c3e50;
    }

    .notification.show {
      display: block;
    }

    .notification.error {
      background: #ffebee;
      border-color: #e53935;
      color: #e53935;
    }

    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 3000;
      align-items: center;
      justify-content: center;
      overflow-y: auto;
      padding: 20px;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: #ffffff;
      border: 1px solid #e1e8ed;
      border-radius: 16px;
      padding: 30px;
      max-width: 500px;
      width: 100%;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
    }

    .modal-header {
      margin-bottom: 20px;
    }

    .modal-title {
      font-size: 24px;
      font-weight: 700;
      color: #2c3e50;
    }

    .form-group {
      margin-bottom: 16px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      color: #5a6c7d;
      font-size: 14px;
      font-weight: 600;
    }

    .form-select {
      width: 100%;
      padding: 12px;
      background: #ffffff;
      border: 1px solid #e1e8ed;
      border-radius: 8px;
      color: #2c3e50;
      font-size: 14px;
    }

    .form-select:focus {
      outline: none;
      border-color: #1e88e5;
      box-shadow: 0 0 0 3px rgba(30, 136, 229, 0.1);
    }

    .warning-box {
      display: none;
      margin-top: 12px;
      padding: 12px;
      background: rgba(229, 57, 53, 0.1);
      border: 1px solid #e53935;
      border-radius: 8px;
      color: #e53935;
      font-size: 14px;
    }

    .modal-actions {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      margin-top: 20px;
    }

    .courier-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      background: #f5f7fa;
      border: 2px solid #e1e8ed;
      border-radius: 12px;
      transition: all 0.2s;
      margin-bottom: 12px;
    }

    .courier-item.active {
      background: rgba(67, 160, 71, 0.1);
      border-color: #43a047;
    }

    .courier-info {
      flex: 1;
    }

    .courier-name {
      font-size: 16px;
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 4px;
    }

    .courier-phone {
      font-size: 12px;
      color: #8b95a5;
      font-family: monospace;
    }

    .courier-status {
      font-size: 18px;
      margin-right: 8px;
    }

    /* Responsive */
    @media (max-width: 767px) {
      .kanban-board {
        grid-template-columns: 1fr;
      }

      .control-buttons {
        width: 100%;
      }

      .btn {
        flex: 1;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <!-- Sidebar Overlay -->
  <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-title">–ù–∞–≤–∏–≥–∞—Ü–∏—è</div>
    </div>
    <div class="sidebar-menu">
      <a href="orders.html" class="sidebar-item active">
        <span class="sidebar-icon">üì¶</span>
        <span>–ó–∞–∫–∞–∑—ã</span>
      </a>
      <a href="tables.html" class="sidebar-item">
        <span class="sidebar-icon">üçΩÔ∏è</span>
        <span>–°—Ç–æ–ª—ã</span>
      </a>
      <a href="kds.html" class="sidebar-item">
        <span class="sidebar-icon">üë®‚Äçüç≥</span>
        <span>KDS (–ö—É—Ö–Ω—è)</span>
      </a>
      <a href="staff.html" class="sidebar-item">
        <span class="sidebar-icon">üë•</span>
        <span>–ü–µ—Ä—Å–æ–Ω–∞–ª</span>
      </a>
      <a href="inventory.html" class="sidebar-item">
        <span class="sidebar-icon">üì¶</span>
        <span>–°–∫–ª–∞–¥</span>
      </a>
      <a href="menu.html" class="sidebar-item">
        <span class="sidebar-icon">üçï</span>
        <span>–ú–µ–Ω—é</span>
      </a>
      <a href="loyalty.html" class="sidebar-item">
        <span class="sidebar-icon">üéÅ</span>
        <span>–õ–æ—è–ª—å–Ω–æ—Å—Ç—å</span>
      </a>
      <a href="analytics.html" class="sidebar-item">
        <span class="sidebar-icon">üìä</span>
        <span>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
      </a>
      <a href="index.html" class="sidebar-item">
        <span class="sidebar-icon">üñ®Ô∏è</span>
        <span>–ü—Ä–∏–Ω—Ç–µ—Ä—ã</span>
      </a>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-left">
      <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
      <div class="nav-brand">
        üçΩÔ∏è FoodFlow
      </div>
    </div>
    <div class="nav-right">
      <button class="btn btn-secondary btn-small" onclick="openCouriersManagement()">
        üë• –ö—É—Ä—å–µ—Ä—ã
      </button>
      <button class="btn btn-primary btn-small" onclick="loadOrders()">
        üîÑ –û–±–Ω–æ–≤–∏—Ç—å
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="container">
    <!-- Header -->
    <div class="header">
      <h1 class="title">üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏</h1>
    </div>

    <!-- Stats Bar -->
    <div class="stats-bar">
      <div class="stat-card">
        <div class="stat-icon" style="background: rgba(251, 140, 0, 0.1);">üîî</div>
        <div class="stat-info">
          <div class="stat-label">–ù–æ–≤—ã–µ</div>
          <div class="stat-value" id="headerPending" style="color: #fb8c00;">0</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon" style="background: rgba(30, 136, 229, 0.1);">‚úì</div>
        <div class="stat-info">
          <div class="stat-label">–ü–æ–¥—Ç–≤.</div>
          <div class="stat-value" id="headerConfirmed" style="color: #1e88e5;">0</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon" style="background: rgba(139, 92, 246, 0.1);">üë®‚Äçüç≥</div>
        <div class="stat-info">
          <div class="stat-label">–ì–æ—Ç–æ–≤.</div>
          <div class="stat-value" id="headerPreparing" style="color: #8b5cf6;">0</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon" style="background: rgba(67, 160, 71, 0.1);">‚úÖ</div>
        <div class="stat-info">
          <div class="stat-label">–ì–æ—Ç–æ–≤—ã</div>
          <div class="stat-value" id="headerReady" style="color: #43a047;">0</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon" style="background: rgba(6, 182, 212, 0.1);">üöö</div>
        <div class="stat-info">
          <div class="stat-label">–ù–∞ –¥–æ—Å—Ç.</div>
          <div class="stat-value" id="headerDelivery" style="color: #06b6d4;">0</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon" style="background: rgba(34, 197, 94, 0.1);">‚úîÔ∏è</div>
        <div class="stat-info">
          <div class="stat-label">–î–æ—Å—Ç–∞–≤–ª.</div>
          <div class="stat-value" id="headerDelivered" style="color: #22c55e;">0</div>
        </div>
      </div>
    </div>

    <!-- Controls -->
    <div class="controls">
      <div class="search-box">
        <input type="text" class="search-input" id="searchInput" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É, –∏–º–µ–Ω–∏ –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É...">
      </div>
      <div class="control-buttons">
        <button class="btn btn-success" onclick="sendAllToKitchen()">
          üë®‚Äçüç≥ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –Ω–∞ –∫—É—Ö–Ω—é
        </button>
      </div>
    </div>

    <!-- Kanban Board -->
    <div class="kanban-board">
      <!-- –ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã -->
      <div class="kanban-column" data-status="pending">
        <div class="column-header">
          <div class="column-title" style="color: #fb8c00;">
            üîî –ù–æ–≤—ã–µ
          </div>
          <div class="column-count" id="countPending">0</div>
        </div>
        <div class="cards-container" id="columnPending">
          <div class="empty-column">
            <div class="empty-icon">üì≠</div>
            <div>–ù–µ—Ç –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤</div>
          </div>
        </div>
      </div>

      <!-- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ -->
      <div class="kanban-column" data-status="confirmed">
        <div class="column-header">
          <div class="column-title" style="color: #1e88e5;">
            ‚úì –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã
          </div>
          <div class="column-count" id="countConfirmed">0</div>
        </div>
        <div class="cards-container" id="columnConfirmed">
          <div class="empty-column">
            <div class="empty-icon">üìã</div>
            <div>–ù–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö</div>
          </div>
        </div>
      </div>

      <!-- –ì–æ—Ç–æ–≤—è—Ç—Å—è -->
      <div class="kanban-column" data-status="preparing">
        <div class="column-header">
          <div class="column-title" style="color: #8b5cf6;">
            üë®‚Äçüç≥ –ì–æ—Ç–æ–≤—è—Ç—Å—è
          </div>
          <div class="column-count" id="countPreparing">0</div>
        </div>
        <div class="cards-container" id="columnPreparing">
          <div class="empty-column">
            <div class="empty-icon">üç≥</div>
            <div>–ù–∏—á–µ–≥–æ –Ω–µ –≥–æ—Ç–æ–≤–∏—Ç—Å—è</div>
          </div>
        </div>
      </div>

      <!-- –ì–æ—Ç–æ–≤—ã -->
      <div class="kanban-column" data-status="ready">
        <div class="column-header">
          <div class="column-title" style="color: #43a047;">
            ‚úÖ –ì–æ—Ç–æ–≤—ã
          </div>
          <div class="column-count" id="countReady">0</div>
        </div>
        <div class="cards-container" id="columnReady">
          <div class="empty-column">
            <div class="empty-icon">üéâ</div>
            <div>–ù–µ—Ç –≥–æ—Ç–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤</div>
          </div>
        </div>
      </div>

      <!-- –ù–∞ –¥–æ—Å—Ç–∞–≤–∫–µ -->
      <div class="kanban-column" data-status="out_for_delivery">
        <div class="column-header">
          <div class="column-title" style="color: #06b6d4;">
            üöö –ù–∞ –¥–æ—Å—Ç–∞–≤–∫–µ
          </div>
          <div class="column-count" id="countDelivery">0</div>
        </div>
        <div class="cards-container" id="columnOut_for_delivery">
          <div class="empty-column">
            <div class="empty-icon">üöó</div>
            <div>–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–µ</div>
          </div>
        </div>
      </div>

      <!-- –î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ -->
      <div class="kanban-column" data-status="delivered">
        <div class="column-header">
          <div class="column-title" style="color: #22c55e;">
            ‚úîÔ∏è –î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
          </div>
          <div class="column-count" id="countDelivered">0</div>
        </div>
        <div class="cards-container" id="columnDelivered">
          <div class="empty-column">
            <div class="empty-icon">üéâ</div>
            <div>–ù–µ—Ç –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Courier Selection Modal -->
  <div id="courierModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">üöö –ù–∞–∑–Ω–∞—á–∏—Ç—å –∫—É—Ä—å–µ—Ä–∞</h2>
      </div>
      <div class="form-group">
        <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—å–µ—Ä–∞ –Ω–∞ —Å–º–µ–Ω–µ:</label>
        <select id="courierSelect" class="form-select">
          <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—å–µ—Ä–∞ --</option>
        </select>
        <div id="noCouriersWarning" class="warning-box">
          ‚ö†Ô∏è –ù–µ—Ç –∫—É—Ä—å–µ—Ä–æ–≤ –Ω–∞ —Å–º–µ–Ω–µ. <a href="#" onclick="event.preventDefault(); closeCourierModal(); openCouriersManagement();" style="color: #1e88e5; text-decoration: underline;">–î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—å–µ—Ä–∞</a>
        </div>
      </div>
      <div class="modal-actions">
        <button onclick="closeCourierModal()" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
        <button onclick="assignCourier()" id="assignCourierBtn" class="btn btn-primary">–ù–∞–∑–Ω–∞—á–∏—Ç—å –∏ –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å —á–µ–∫</button>
      </div>
    </div>
  </div>

  <!-- Couriers Management Modal -->
  <div id="couriersManagementModal" class="modal">
    <div class="modal-content" style="max-width: 600px;">
      <div class="modal-header">
        <h2 class="modal-title">üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—å–µ—Ä–∞–º–∏ –Ω–∞ —Å–º–µ–Ω–µ</h2>
      </div>
      <div style="margin-bottom: 20px; color: #8b95a5; font-size: 14px;">
        –í–∫–ª—é—á–∏—Ç–µ –∫—É—Ä—å–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Å–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞—é—Ç. –¢–æ–ª—å–∫–æ –∫—É—Ä—å–µ—Ä—ã –Ω–∞ —Å–º–µ–Ω–µ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∞—Ç—å –∑–∞–∫–∞–∑—ã.
      </div>
      <div id="couriersListManagement" style="margin-bottom: 20px;">
        <!-- Courier toggles will be inserted here -->
      </div>
      <div class="modal-actions">
        <button onclick="closeCouriersManagement()" class="btn btn-primary">–ì–æ—Ç–æ–≤–æ</button>
      </div>
    </div>
  </div>

  <!-- Notification -->
  <div class="notification" id="notification"></div>

  <script>
    const API_BASE_URL = 'http://localhost/api';
    let orders = [];
    let searchTerm = '';
    let selectedOrderIdForCourier = null;

    const allCouriers = {
      '1': { name: '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ò–≤–∞–Ω–æ–≤', phone: '+7 (999) 111-11-11' },
      '2': { name: '–ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–∞', phone: '+7 (999) 222-22-22' },
      '3': { name: '–î–º–∏—Ç—Ä–∏–π –°–∏–¥–æ—Ä–æ–≤', phone: '+7 (999) 333-33-33' },
      '4': { name: '–ï–ª–µ–Ω–∞ –ö—É–∑–Ω–µ—Ü–æ–≤–∞', phone: '+7 (999) 444-44-44' },
      '5': { name: '–ò–≥–æ—Ä—å –°–º–∏—Ä–Ω–æ–≤', phone: '+7 (999) 555-55-55' }
    };

    // Load couriers on shift from localStorage
    let couriersOnShift = JSON.parse(localStorage.getItem('couriersOnShift') || '[]');

    // Sidebar functions
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebarOverlay');
      sidebar.classList.toggle('open');
      overlay.classList.toggle('active');
    }

    function closeSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebarOverlay');
      sidebar.classList.remove('open');
      overlay.classList.remove('active');
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      loadOrders();
      setupSearch();
      setupDragAndDrop();
      // Auto-refresh every 5 seconds
      setInterval(loadOrders, 5000);
      // Play sound for new orders
      checkForNewOrders();
      updateNavCourierBadge();
    });

    // Load orders
    async function loadOrders() {
      try {
        const response = await fetch(`${API_BASE_URL}/orders`);
        if (response.ok) {
          const data = await response.json();
          const newOrders = data.data || [];

          // Check for new orders
          if (newOrders.length > orders.length) {
            playNotificationSound();
            showNotification('üîî –ù–æ–≤—ã–π –∑–∞–∫–∞–∑ –ø–æ–ª—É—á–µ–Ω!');
          }

          orders = newOrders;
          updateStats();
          renderKanban();
        }
      } catch (error) {
        console.error('Error loading orders:', error);
      }
    }

    // Update statistics
    function updateStats() {
      const pending = orders.filter(o => o.status === 'pending').length;
      const confirmed = orders.filter(o => o.status === 'confirmed').length;
      const preparing = orders.filter(o => o.status === 'preparing').length;
      const ready = orders.filter(o => o.status === 'ready').length;
      const delivery = orders.filter(o => o.status === 'out_for_delivery').length;
      const delivered = orders.filter(o => o.status === 'delivered').length;

      document.getElementById('headerPending').textContent = pending;
      document.getElementById('headerConfirmed').textContent = confirmed;
      document.getElementById('headerPreparing').textContent = preparing;
      document.getElementById('headerReady').textContent = ready;
      document.getElementById('headerDelivery').textContent = delivery;
      document.getElementById('headerDelivered').textContent = delivered;

      document.getElementById('countPending').textContent = pending;
      document.getElementById('countConfirmed').textContent = confirmed;
      document.getElementById('countPreparing').textContent = preparing;
      document.getElementById('countReady').textContent = ready;
      document.getElementById('countDelivery').textContent = delivery;
      document.getElementById('countDelivered').textContent = delivered;
    }

    // Render Kanban board
    function renderKanban() {
      const statuses = ['pending', 'confirmed', 'preparing', 'ready', 'out_for_delivery', 'delivered'];

      statuses.forEach(status => {
        let containerId;
        if (status === 'out_for_delivery') {
          containerId = 'columnOut_for_delivery';
        } else {
          containerId = `column${status.charAt(0).toUpperCase() + status.slice(1)}`;
        }

        const container = document.getElementById(containerId);
        const filtered = orders.filter(o => {
          const matchesStatus = o.status === status;
          const matchesSearch = !searchTerm ||
            o.id.toString().includes(searchTerm) ||
            o.customer.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
            o.customer.phone.includes(searchTerm);
          return matchesStatus && matchesSearch;
        });

        if (filtered.length === 0) {
          const emojis = {
            pending: 'üì≠',
            confirmed: 'üìã',
            preparing: 'üç≥',
            ready: 'üéâ',
            out_for_delivery: 'üöó',
            delivered: 'üéâ'
          };
          const texts = {
            pending: '–ù–µ—Ç –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤',
            confirmed: '–ù–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö',
            preparing: '–ù–∏—á–µ–≥–æ –Ω–µ –≥–æ—Ç–æ–≤–∏—Ç—Å—è',
            ready: '–ù–µ—Ç –≥–æ—Ç–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤',
            out_for_delivery: '–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–µ',
            delivered: '–ù–µ—Ç –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤'
          };
          container.innerHTML = `
            <div class="empty-column">
              <div class="empty-icon">${emojis[status]}</div>
              <div>${texts[status]}</div>
            </div>
          `;
        } else {
          container.innerHTML = filtered.map(order => renderOrderCard(order)).join('');
        }
      });

      setupDragAndDrop();
    }

    // Render order card
    function renderOrderCard(order) {
      const isNew = order.status === 'pending';
      const elapsed = Math.floor((Date.now() - new Date(order.createdAt).getTime()) / 60000);

      return `
        <div class="order-card" draggable="true" data-order-id="${order.id}">
          ${isNew ? '<div class="new-order-badge">NEW</div>' : ''}
          <div class="card-header">
            <div class="order-number">#${order.id}</div>
            <div class="order-time">
              <span class="time-value">${elapsed} –º–∏–Ω –Ω–∞–∑–∞–¥</span>
            </div>
          </div>
          <div class="customer-info">
            <div class="customer-name">üë§ ${order.customer.name}</div>
            <div class="customer-phone">üìû ${order.customer.phone}</div>
            ${order.deliveryAddress ? `
              <div class="customer-address">üìç ${order.deliveryAddress}</div>
            ` : ''}
            ${order.courierName ? `
              <div class="customer-address" style="color: #06b6d4;">üöö –ö—É—Ä—å–µ—Ä: ${order.courierName}</div>
            ` : ''}
          </div>
          <div class="order-items">
            ${order.items.slice(0, 3).map(item => `
              <div class="item">
                <div>
                  <span class="item-name">${item.name}</span>
                  <span class="item-qty">√ó${item.quantity}</span>
                </div>
                <span class="item-price">${item.price * item.quantity} ‚ÇΩ</span>
              </div>
            `).join('')}
            ${order.items.length > 3 ? `<div class="item" style="color: #8b95a5; font-size: 12px;">... –∏ –µ—â–µ ${order.items.length - 3} –ø–æ–∑.</div>` : ''}
          </div>
          ${order.specialInstructions ? `
            <div class="comment-badge">üí¨ –ï—Å—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</div>
          ` : ''}
          <div class="card-footer">
            <div class="order-total">${order.total} ‚ÇΩ</div>
            <div class="card-actions">
              ${order.status === 'pending' || order.status === 'confirmed' ? `
                <button class="action-icon-btn btn-kitchen" onclick="sendToKitchen(${order.id})" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –∫—É—Ö–Ω—é">
                  üë®‚Äçüç≥
                </button>
              ` : ''}
              ${order.status === 'preparing' ? `
                <button class="action-icon-btn btn-ready" onclick="markAsReady(${order.id})" title="–ì–æ—Ç–æ–≤–æ">
                  ‚úÖ
                </button>
              ` : ''}
              ${order.status === 'ready' ? `
                <button class="action-icon-btn btn-delivery" onclick="openCourierModal(${order.id})" title="–ü–µ—Ä–µ–¥–∞—Ç—å –∫—É—Ä—å–µ—Ä—É">
                  üöö
                </button>
              ` : ''}
              ${order.status === 'out_for_delivery' ? `
                <button class="action-icon-btn btn-delivered" onclick="markAsDelivered(${order.id})" title="–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ">
                  ‚úîÔ∏è
                </button>
              ` : ''}
              <button class="action-icon-btn btn-print" onclick="printOrder(${order.id})" title="–ü–µ—á–∞—Ç—å —á–µ–∫–∞">
                üñ®Ô∏è
              </button>
              ${order.status !== 'delivered' && order.status !== 'cancelled' ? `
                <button class="action-icon-btn btn-cancel" onclick="cancelOrder(${order.id})" title="–û—Ç–º–µ–Ω–∏—Ç—å">
                  ‚úï
                </button>
              ` : ''}
            </div>
          </div>
        </div>
      `;
    }

    // Send to kitchen
    async function sendToKitchen(orderId) {
      try {
        await updateStatus(orderId, 'preparing');
        showNotification(`–ó–∞–∫–∞–∑ #${orderId} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –∫—É—Ö–Ω—é! üë®‚Äçüç≥`);
        playSound('success');
      } catch (error) {
        showNotification('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ –∫—É—Ö–Ω—é', 'error');
      }
    }

    // Mark order as ready
    async function markAsReady(orderId) {
      try {
        await updateStatus(orderId, 'ready');
        showNotification(`–ó–∞–∫–∞–∑ #${orderId} –≥–æ—Ç–æ–≤! ‚úÖ`);
        playSound('success');
      } catch (error) {
        showNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞', 'error');
      }
    }

    // Mark order as delivered
    async function markAsDelivered(orderId) {
      try {
        await updateStatus(orderId, 'delivered');
        showNotification(`–ó–∞–∫–∞–∑ #${orderId} –¥–æ—Å—Ç–∞–≤–ª–µ–Ω! ‚úîÔ∏è`);
        playSound('success');
      } catch (error) {
        showNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞', 'error');
      }
    }

    // Send all pending/confirmed orders to kitchen
    async function sendAllToKitchen() {
      const toSend = orders.filter(o => o.status === 'pending' || o.status === 'confirmed');
      if (toSend.length === 0) {
        showNotification('–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ –∫—É—Ö–Ω—é', 'error');
        return;
      }

      const confirmed = confirm(`–û—Ç–ø—Ä–∞–≤–∏—Ç—å ${toSend.length} –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ –∫—É—Ö–Ω—é?`);
      if (!confirmed) return;

      for (const order of toSend) {
        await updateStatus(order.id, 'preparing');
      }

      showNotification(`${toSend.length} –∑–∞–∫–∞–∑–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ –∫—É—Ö–Ω—é! üë®‚Äçüç≥`);
      playSound('success');
    }

    // Print order
    async function printOrder(orderId) {
      showNotification(`–ü–µ—á–∞—Ç—å —á–µ–∫–∞ –¥–ª—è –∑–∞–∫–∞–∑–∞ #${orderId}... üñ®Ô∏è`);
      // TODO: Integrate with printer API
      playSound('print');
    }

    // Cancel order
    async function cancelOrder(orderId) {
      const confirmed = confirm(`–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑ #${orderId}?`);
      if (!confirmed) return;

      await updateStatus(orderId, 'cancelled');
      showNotification(`–ó–∞–∫–∞–∑ #${orderId} –æ—Ç–º–µ–Ω–µ–Ω`);
    }

    // Update order status
    async function updateStatus(orderId, newStatus) {
      try {
        const response = await fetch(`${API_BASE_URL}/orders/${orderId}`, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ status: newStatus })
        });

        if (response.ok) {
          await loadOrders();
        }
      } catch (error) {
        console.error('Error updating status:', error);
      }
    }

    // Setup drag and drop
    function setupDragAndDrop() {
      const cards = document.querySelectorAll('.order-card');
      const containers = document.querySelectorAll('.cards-container');

      cards.forEach(card => {
        card.addEventListener('dragstart', (e) => {
          card.classList.add('dragging');
          e.dataTransfer.effectAllowed = 'move';
          e.dataTransfer.setData('text/html', card.innerHTML);
        });

        card.addEventListener('dragend', () => {
          card.classList.remove('dragging');
        });
      });

      containers.forEach(container => {
        container.addEventListener('dragover', (e) => {
          e.preventDefault();
          const column = container.closest('.kanban-column');
          column.style.background = 'rgba(30, 136, 229, 0.05)';
        });

        container.addEventListener('dragleave', () => {
          const column = container.closest('.kanban-column');
          column.style.background = '';
        });

        container.addEventListener('drop', async (e) => {
          e.preventDefault();
          const column = container.closest('.kanban-column');
          column.style.background = '';

          const dragging = document.querySelector('.dragging');
          if (dragging) {
            const orderId = dragging.dataset.orderId;
            const newStatus = column.dataset.status;
            await updateStatus(parseInt(orderId), newStatus);
            showNotification(`–ó–∞–∫–∞–∑ #${orderId} –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤ "${getStatusName(newStatus)}"`);
          }
        });
      });
    }

    function getStatusName(status) {
      const names = {
        pending: '–ù–æ–≤—ã–µ',
        confirmed: '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã',
        preparing: '–ì–æ—Ç–æ–≤—è—Ç—Å—è',
        ready: '–ì–æ—Ç–æ–≤—ã',
        out_for_delivery: '–ù–∞ –¥–æ—Å—Ç–∞–≤–∫–µ',
        delivered: '–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ'
      };
      return names[status] || status;
    }

    // Open courier modal
    function openCourierModal(orderId) {
      selectedOrderIdForCourier = orderId;

      // Populate courier select with only couriers on shift
      const select = document.getElementById('courierSelect');
      const warning = document.getElementById('noCouriersWarning');
      const assignBtn = document.getElementById('assignCourierBtn');

      select.innerHTML = '<option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—å–µ—Ä–∞ --</option>';

      if (couriersOnShift.length === 0) {
        warning.style.display = 'block';
        assignBtn.disabled = true;
        assignBtn.style.opacity = '0.5';
        assignBtn.style.cursor = 'not-allowed';
      } else {
        warning.style.display = 'none';
        assignBtn.disabled = false;
        assignBtn.style.opacity = '1';
        assignBtn.style.cursor = 'pointer';

        couriersOnShift.forEach(courierId => {
          const courier = allCouriers[courierId];
          if (courier) {
            const option = document.createElement('option');
            option.value = courierId;
            option.textContent = courier.name;
            select.appendChild(option);
          }
        });
      }

      const modal = document.getElementById('courierModal');
      modal.classList.add('active');
    }

    // Close courier modal
    function closeCourierModal() {
      selectedOrderIdForCourier = null;
      document.getElementById('courierSelect').value = '';
      document.getElementById('courierModal').classList.remove('active');
    }

    // Assign courier to order
    async function assignCourier() {
      const courierId = document.getElementById('courierSelect').value;

      if (!courierId) {
        showNotification('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—å–µ—Ä–∞', 'error');
        return;
      }

      const courier = allCouriers[courierId];
      if (!courier) {
        showNotification('–ö—É—Ä—å–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
        return;
      }

      try {
        const response = await fetch(`${API_BASE_URL}/orders/${selectedOrderIdForCourier}`, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            status: 'out_for_delivery',
            courierId: parseInt(courierId),
            courierName: courier.name
          })
        });

        if (response.ok) {
          showNotification(`–ó–∞–∫–∞–∑ #${selectedOrderIdForCourier} –Ω–∞–∑–Ω–∞—á–µ–Ω –∫—É—Ä—å–µ—Ä—É ${courier.name} üöö`);
          playSound('success');

          // Print courier receipt
          await printCourierReceipt(selectedOrderIdForCourier);

          closeCourierModal();
          await loadOrders();
        }
      } catch (error) {
        console.error('Error assigning courier:', error);
        showNotification('–û—à–∏–±–∫–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∫—É—Ä—å–µ—Ä–∞', 'error');
      }
    }

    // Print courier receipt
    async function printCourierReceipt(orderId) {
      const order = orders.find(o => o.id === orderId);
      if (!order) return;

      showNotification(`–ü–µ—á–∞—Ç—å —á–µ–∫–∞ –¥–ª—è –∫—É—Ä—å–µ—Ä–∞... üñ®Ô∏è`);

      // TODO: Integrate with printer API
      // For now, just show a preview in console
      console.log('=== –ß–ï–ö –î–õ–Ø –ö–£–†–¨–ï–†–ê ===');
      console.log(`–ó–∞–∫–∞–∑ #${order.id}`);
      console.log(`–ö–ª–∏–µ–Ω—Ç: ${order.customer.name}`);
      console.log(`–¢–µ–ª–µ—Ñ–æ–Ω: ${order.customer.phone}`);
      console.log(`–ê–¥—Ä–µ—Å: ${order.deliveryAddress}`);
      console.log('---');
      order.items.forEach(item => {
        console.log(`${item.name} x${item.quantity} - ${item.price * item.quantity} ‚ÇΩ`);
      });
      console.log('---');
      console.log(`–ò—Ç–æ–≥–æ: ${order.total} ‚ÇΩ`);
      console.log(`–ö—É—Ä—å–µ—Ä: ${order.courierName}`);
      console.log('======================');

      playSound('print');
    }

    // Open couriers management modal
    function openCouriersManagement() {
      renderCouriersManagement();
      document.getElementById('couriersManagementModal').classList.add('active');
    }

    // Close couriers management modal
    function closeCouriersManagement() {
      document.getElementById('couriersManagementModal').classList.remove('active');
      updateNavCourierBadge();
    }

    // Render couriers management list
    function renderCouriersManagement() {
      const container = document.getElementById('couriersListManagement');
      container.innerHTML = '';

      Object.keys(allCouriers).forEach(courierId => {
        const courier = allCouriers[courierId];
        const isOnShift = couriersOnShift.includes(courierId);

        const courierItem = document.createElement('div');
        courierItem.className = `courier-item ${isOnShift ? 'active' : ''}`;

        courierItem.innerHTML = `
          <div style="display: flex; align-items: center; gap: 8px;">
            <span class="courier-status">${isOnShift ? 'üü¢' : '‚ö´'}</span>
            <div class="courier-info">
              <div class="courier-name">${courier.name}</div>
              <div class="courier-phone">üìû ${courier.phone}</div>
            </div>
          </div>
          <button
            onclick="toggleCourierShift('${courierId}')"
            class="btn btn-small ${isOnShift ? 'btn-cancel' : 'btn-success'}"
          >
            ${isOnShift ? '–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–º–µ–Ω—É' : '–ù–∞—á–∞—Ç—å —Å–º–µ–Ω—É'}
          </button>
        `;

        container.appendChild(courierItem);
      });
    }

    // Toggle courier shift
    function toggleCourierShift(courierId) {
      const index = couriersOnShift.indexOf(courierId);

      if (index === -1) {
        // Add courier to shift
        couriersOnShift.push(courierId);
        showNotification(`${allCouriers[courierId].name} –Ω–∞—á–∞–ª(–∞) —Å–º–µ–Ω—É üü¢`);
        playSound('success');
      } else {
        // Remove courier from shift
        couriersOnShift.splice(index, 1);
        showNotification(`${allCouriers[courierId].name} –∑–∞–≤–µ—Ä—à–∏–ª(–∞) —Å–º–µ–Ω—É ‚ö´`);
      }

      // Save to localStorage
      localStorage.setItem('couriersOnShift', JSON.stringify(couriersOnShift));

      // Re-render
      renderCouriersManagement();
      updateNavCourierBadge();
    }

    // Update navigation courier badge
    function updateNavCourierBadge() {
      const navButton = document.querySelector('.nav-right .btn-secondary');
      if (navButton) {
        const count = couriersOnShift.length;
        if (count > 0) {
          navButton.innerHTML = `üë• –ö—É—Ä—å–µ—Ä—ã (${count})`;
          navButton.style.background = 'rgba(67, 160, 71, 0.1)';
          navButton.style.borderColor = '#43a047';
          navButton.style.color = '#43a047';
        } else {
          navButton.innerHTML = 'üë• –ö—É—Ä—å–µ—Ä—ã';
          navButton.style.background = '';
          navButton.style.borderColor = '#e1e8ed';
          navButton.style.color = '#5a6c7d';
        }
      }
    }

    // Setup search
    function setupSearch() {
      document.getElementById('searchInput').addEventListener('input', (e) => {
        searchTerm = e.target.value;
        renderKanban();
      });
    }

    // Show notification
    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = `notification show ${type}`;

      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    // Play sound
    function playSound(type) {
      // Simple beep using Web Audio API
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();

      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);

      if (type === 'success') {
        oscillator.frequency.value = 800;
      } else if (type === 'error') {
        oscillator.frequency.value = 400;
      } else {
        oscillator.frequency.value = 600;
      }

      oscillator.type = 'sine';
      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);

      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.1);
    }

    // Play notification sound for new orders
    function playNotificationSound() {
      playSound('success');
    }

    // Check for new orders
    function checkForNewOrders() {
      setInterval(() => {
        const newOrdersCount = orders.filter(o => o.status === 'pending').length;
        if (newOrdersCount > 0) {
          document.title = `(${newOrdersCount}) –ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã - FoodFlow`;
        } else {
          document.title = '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ - FoodFlow';
        }
      }, 1000);
    }
  </script>
</body>
</html>
