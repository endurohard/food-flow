<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –î–æ—Å—Ç–∞–≤–∫–∞–º–∏ - Food Flow</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: #f5f5f5;
      color: #333;
      overflow: hidden;
    }

    .container {
      display: flex;
      height: 100vh;
    }

    /* –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç–∞–≤–æ–∫ */
    .deliveries-list {
      width: 420px;
      background: white;
      border-right: 1px solid #e0e0e0;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .header {
      padding: 16px 20px;
      background: #2196F3;
      color: white;
    }

    .header h1 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .header .subtitle {
      font-size: 13px;
      opacity: 0.9;
    }

    .filters {
      padding: 12px;
      background: #fafafa;
      border-bottom: 1px solid #e0e0e0;
    }

    .filter-tabs {
      display: flex;
      gap: 4px;
      margin-bottom: 8px;
    }

    .filter-tab {
      flex: 1;
      padding: 7px 10px;
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      cursor: pointer;
      text-align: center;
      font-size: 12px;
      transition: all 0.2s;
    }

    .filter-tab.active {
      background: #2196F3;
      color: white;
      border-color: #2196F3;
    }

    .filter-tab:hover:not(.active) {
      background: #f0f0f0;
    }

    .search-box {
      width: 100%;
      padding: 8px 10px;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      font-size: 13px;
    }

    .delivery-items {
      flex: 1;
      overflow-y: auto;
      padding: 8px;
    }

    .delivery-card {
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 6px;
      padding: 12px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .delivery-card:hover {
      border-color: #2196F3;
      box-shadow: 0 2px 8px rgba(33, 150, 243, 0.2);
    }

    .delivery-card.selected {
      border-color: #2196F3;
      background: #e3f2fd;
    }

    .delivery-card.new {
      border-left: 4px solid #FF9800;
    }

    .delivery-card.assigned {
      border-left: 4px solid #2196F3;
    }

    .delivery-card.in_transit {
      border-left: 4px solid #9C27B0;
    }

    .delivery-card.delivered {
      border-left: 4px solid #4CAF50;
    }

    .delivery-card.cancelled {
      border-left: 4px solid #F44336;
      opacity: 0.6;
    }

    .delivery-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .delivery-id {
      font-weight: 600;
      font-size: 14px;
      color: #2196F3;
    }

    .delivery-time {
      font-size: 11px;
      color: #666;
    }

    .delivery-status {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 10px;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      margin-bottom: 6px;
    }

    .status-new { background: #FFE0B2; color: #E65100; }
    .status-assigned { background: #BBDEFB; color: #0D47A1; }
    .status-in_transit { background: #E1BEE7; color: #4A148C; }
    .status-delivered { background: #C8E6C9; color: #1B5E20; }
    .status-cancelled { background: #FFCDD2; color: #B71C1C; }

    .delivery-address {
      font-size: 12px;
      color: #333;
      margin-bottom: 4px;
      display: flex;
      align-items: flex-start;
      gap: 4px;
      line-height: 1.4;
    }

    .delivery-customer {
      font-size: 12px;
      color: #666;
    }

    /* –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - –î–µ—Ç–∞–ª–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ */
    .delivery-details {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .details-header {
      padding: 16px 20px;
      background: white;
      border-bottom: 1px solid #e0e0e0;
    }

    .details-title {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 8px;
      color: #333;
    }

    .status-timeline {
      display: flex;
      gap: 15px;
      padding: 16px 20px;
      background: white;
      border-bottom: 1px solid #e0e0e0;
    }

    .timeline-step {
      flex: 1;
      text-align: center;
      position: relative;
    }

    .timeline-step::after {
      content: '';
      position: absolute;
      top: 15px;
      left: 50%;
      width: 100%;
      height: 2px;
      background: #e0e0e0;
      z-index: 0;
    }

    .timeline-step:last-child::after {
      display: none;
    }

    .timeline-icon {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: #e0e0e0;
      margin: 0 auto 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      z-index: 1;
      font-size: 14px;
    }

    .timeline-step.completed .timeline-icon {
      background: #4CAF50;
      color: white;
    }

    .timeline-step.active .timeline-icon {
      background: #2196F3;
      color: white;
      animation: pulse 2s infinite;
    }

    .timeline-label {
      font-size: 11px;
      color: #666;
      font-weight: 500;
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(33, 150, 243, 0.7); }
      50% { box-shadow: 0 0 0 10px rgba(33, 150, 243, 0); }
    }

    .details-content {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
    }

    .section {
      background: white;
      border-radius: 6px;
      padding: 16px;
      margin-bottom: 12px;
    }

    .section-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 12px;
      color: #333;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #f0f0f0;
      gap: 12px;
    }

    .info-row:last-child {
      border-bottom: none;
    }

    .info-label {
      font-size: 13px;
      color: #666;
    }

    .info-value {
      font-size: 13px;
      color: #333;
      font-weight: 500;
      text-align: right;
    }

    .order-items {
      margin-top: 8px;
    }

    .order-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 10px;
      background: #f9f9f9;
      border-radius: 4px;
      margin-bottom: 6px;
      align-items: center;
    }

    .item-name {
      font-size: 13px;
      color: #333;
    }

    .item-quantity {
      font-size: 12px;
      color: #666;
    }

    .item-price {
      font-size: 13px;
      font-weight: 600;
      color: #333;
    }

    .actions {
      padding: 16px;
      background: white;
      border-top: 1px solid #e0e0e0;
      display: flex;
      gap: 8px;
    }

    .btn {
      flex: 1;
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    .btn-primary {
      background: #2196F3;
      color: white;
    }

    .btn-primary:hover {
      background: #1976D2;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
    }

    .btn-success {
      background: #4CAF50;
      color: white;
    }

    .btn-success:hover {
      background: #388E3C;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
    }

    .btn-danger {
      background: #F44336;
      color: white;
    }

    .btn-danger:hover {
      background: #D32F2F;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);
    }

    .btn:disabled {
      background: #e0e0e0;
      color: #999;
      cursor: not-allowed;
      transform: none;
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #999;
    }

    .empty-state-icon {
      font-size: 64px;
      margin-bottom: 20px;
      opacity: 0.3;
    }

    .map-placeholder {
      height: 250px;
      background: #f0f0f0;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #999;
      font-size: 13px;
    }

    /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
    .stats {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
      padding: 12px;
      background: white;
      border-bottom: 1px solid #e0e0e0;
    }

    .stat-card {
      text-align: center;
      padding: 10px 8px;
      background: #fafafa;
      border-radius: 6px;
    }

    .stat-value {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 3px;
    }

    .stat-label {
      font-size: 10px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.3px;
    }

    .stat-card.new .stat-value { color: #FF9800; }
    .stat-card.active .stat-value { color: #2196F3; }
    .stat-card.completed .stat-value { color: #4CAF50; }
    .stat-card.cancelled .stat-value { color: #F44336; }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    ::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #999;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <div class="deliveries-list">
      <div class="header">
        <h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –î–æ—Å—Ç–∞–≤–∫–∞–º–∏</h1>
        <div class="subtitle" id="currentTime">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
      </div>

      <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
      <div class="stats">
        <div class="stat-card new">
          <div class="stat-value" id="stat-new">0</div>
          <div class="stat-label">–ù–æ–≤—ã–µ</div>
        </div>
        <div class="stat-card active">
          <div class="stat-value" id="stat-active">0</div>
          <div class="stat-label">–í –ø—É—Ç–∏</div>
        </div>
        <div class="stat-card completed">
          <div class="stat-value" id="stat-completed">0</div>
          <div class="stat-label">–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ</div>
        </div>
        <div class="stat-card cancelled">
          <div class="stat-value" id="stat-cancelled">0</div>
          <div class="stat-label">–û—Ç–º–µ–Ω–µ–Ω–æ</div>
        </div>
      </div>

      <!-- –§–∏–ª—å—Ç—Ä—ã -->
      <div class="filters">
        <div class="filter-tabs">
          <div class="filter-tab active" data-filter="all">–í—Å–µ</div>
          <div class="filter-tab" data-filter="new">–ù–æ–≤—ã–µ</div>
          <div class="filter-tab" data-filter="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</div>
        </div>
        <input type="text" class="search-box" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∞–¥—Ä–µ—Å—É –∏–ª–∏ –∑–∞–∫–∞–∑—É..." id="searchBox">
      </div>

      <!-- –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç–∞–≤–æ–∫ -->
      <div class="delivery-items" id="deliveryList">
        <div class="empty-state">
          <div class="empty-state-icon">üì¶</div>
          <div>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ—Å—Ç–∞–≤–æ–∫...</div>
        </div>
      </div>
    </div>

    <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <div class="delivery-details">
      <div id="detailsView" class="empty-state" style="flex: 1; display: flex; align-items: center; justify-content: center;">
        <div>
          <div class="empty-state-icon">üöö</div>
          <div>–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ—Å—Ç–∞–≤–∫—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    let deliveries = [];
    let selectedDelivery = null;
    let currentFilter = 'all';

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    document.addEventListener('DOMContentLoaded', () => {
      updateTime();
      setInterval(updateTime, 1000);
      setupEventListeners();
      loadDeliveries();
      setInterval(loadDeliveries, 5000); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
    });

    function updateTime() {
      const now = new Date();
      const timeStr = now.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });
      const dateStr = now.toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', year: 'numeric' });
      document.getElementById('currentTime').textContent = `${timeStr} ‚Ä¢ ${dateStr}`;
    }

    function setupEventListeners() {
      // –§–∏–ª—å—Ç—Ä—ã
      document.querySelectorAll('.filter-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          currentFilter = tab.dataset.filter;
          renderDeliveries();
        });
      });

      // –ü–æ–∏—Å–∫
      document.getElementById('searchBox').addEventListener('input', (e) => {
        renderDeliveries(e.target.value);
      });
    }

    async function loadDeliveries() {
      try {
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API)
        deliveries = generateMockDeliveries();
        renderDeliveries();
        updateStats();
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ—Å—Ç–∞–≤–æ–∫:', error);
      }
    }

    function generateMockDeliveries() {
      const statuses = ['new', 'assigned', 'in_transit', 'delivered', 'cancelled'];
      const addresses = [
        '—É–ª. –ü—É—à–∫–∏–Ω–∞, –¥. 25, –∫–≤. 12',
        '–ø—Ä. –õ–µ–Ω–∏–Ω–∞, –¥. 45, –∫–≤. 7',
        '—É–ª. –ì–∞–≥–∞—Ä–∏–Ω–∞, –¥. 18, –ø–æ–¥—ä–µ–∑–¥ 2',
        '—É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, –¥. 32, –∫–≤. 55',
        '—É–ª. –ú–∏—Ä–∞, –¥. 10, –æ—Ñ–∏—Å 301'
      ];
      const customers = ['–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤', '–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞', '–ê–ª–µ–∫—Å–µ–π –ö–æ–∑–ª–æ–≤', '–ï–ª–µ–Ω–∞ –ò–≤–∞–Ω–æ–≤–∞', '–î–º–∏—Ç—Ä–∏–π –°–º–∏—Ä–Ω–æ–≤'];

      return Array.from({ length: 15 }, (_, i) => ({
        id: `D-${1000 + i}`,
        orderId: `ORD-${2000 + i}`,
        status: statuses[Math.floor(Math.random() * statuses.length)],
        address: addresses[Math.floor(Math.random() * addresses.length)],
        customer: customers[Math.floor(Math.random() * customers.length)],
        phone: '+7 (999) 123-45-67',
        deliveryTime: new Date(Date.now() + Math.random() * 3600000).toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' }),
        courier: i % 3 === 0 ? null : `–ö—É—Ä—å–µ—Ä ${Math.floor(Math.random() * 5) + 1}`,
        total: Math.floor(Math.random() * 3000) + 500,
        items: [
          { name: '–ü–∏—Ü—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞', quantity: 1, price: 450 },
          { name: 'Coca-Cola 0.5–ª', quantity: 2, price: 120 }
        ],
        createdAt: new Date(Date.now() - Math.random() * 7200000)
      }));
    }

    function renderDeliveries(searchTerm = '') {
      const listEl = document.getElementById('deliveryList');
      let filtered = deliveries;

      // –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
      if (currentFilter !== 'all') {
        if (currentFilter === 'new') {
          filtered = filtered.filter(d => d.status === 'new');
        } else if (currentFilter === 'active') {
          filtered = filtered.filter(d => ['assigned', 'in_transit'].includes(d.status));
        }
      }

      // –ü–æ–∏—Å–∫
      if (searchTerm) {
        filtered = filtered.filter(d =>
          d.address.toLowerCase().includes(searchTerm.toLowerCase()) ||
          d.orderId.toLowerCase().includes(searchTerm.toLowerCase()) ||
          d.customer.toLowerCase().includes(searchTerm.toLowerCase())
        );
      }

      // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è
      filtered.sort((a, b) => b.createdAt - a.createdAt);

      if (filtered.length === 0) {
        listEl.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üîç</div>
            <div>–î–æ—Å—Ç–∞–≤–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>
          </div>
        `;
        return;
      }

      listEl.innerHTML = filtered.map(delivery => `
        <div class="delivery-card ${delivery.status} ${selectedDelivery?.id === delivery.id ? 'selected' : ''}"
             onclick="selectDelivery('${delivery.id}')">
          <div class="delivery-header">
            <span class="delivery-id">${delivery.orderId}</span>
            <span class="delivery-time">${delivery.deliveryTime}</span>
          </div>
          <span class="delivery-status status-${delivery.status}">${getStatusName(delivery.status)}</span>
          <div class="delivery-address">
            üìç ${delivery.address}
          </div>
          <div class="delivery-customer">
            üë§ ${delivery.customer}
          </div>
        </div>
      `).join('');
    }

    function selectDelivery(id) {
      selectedDelivery = deliveries.find(d => d.id === id);
      renderDeliveries();
      renderDetails();
    }

    function renderDetails() {
      if (!selectedDelivery) return;

      const d = selectedDelivery;
      const detailsView = document.getElementById('detailsView');

      const statusSteps = [
        { key: 'new', label: '–°–æ–∑–¥–∞–Ω', icon: 'üìã' },
        { key: 'assigned', label: '–ù–∞–∑–Ω–∞—á–µ–Ω', icon: 'üë§' },
        { key: 'in_transit', label: '–í –ø—É—Ç–∏', icon: 'üöö' },
        { key: 'delivered', label: '–î–æ—Å—Ç–∞–≤–ª–µ–Ω', icon: '‚úÖ' }
      ];

      const currentStepIndex = statusSteps.findIndex(s => s.key === d.status);

      detailsView.innerHTML = `
        <div class="details-header">
          <div class="details-title">–ó–∞–∫–∞–∑ ${d.orderId}</div>
        </div>

        <div class="status-timeline">
          ${statusSteps.map((step, index) => `
            <div class="timeline-step ${index < currentStepIndex ? 'completed' : ''} ${index === currentStepIndex ? 'active' : ''}">
              <div class="timeline-icon">${step.icon}</div>
              <div class="timeline-label">${step.label}</div>
            </div>
          `).join('')}
        </div>

        <div class="details-content">
          <div class="section">
            <div class="section-title">üìç –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ</div>
            <div class="info-row">
              <span class="info-label">–ê–¥—Ä–µ—Å</span>
              <span class="info-value">${d.address}</span>
            </div>
            <div class="info-row">
              <span class="info-label">–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏</span>
              <span class="info-value">${d.deliveryTime}</span>
            </div>
            <div class="info-row">
              <span class="info-label">–ö—É—Ä—å–µ—Ä</span>
              <span class="info-value">${d.courier || '–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω'}</span>
            </div>
            <div class="info-row">
              <span class="info-label">–°—Ç–∞—Ç—É—Å</span>
              <span class="info-value">
                <span class="delivery-status status-${d.status}">${getStatusName(d.status)}</span>
              </span>
            </div>
          </div>

          <div class="section">
            <div class="section-title">üë§ –ö–ª–∏–µ–Ω—Ç</div>
            <div class="info-row">
              <span class="info-label">–ò–º—è</span>
              <span class="info-value">${d.customer}</span>
            </div>
            <div class="info-row">
              <span class="info-label">–¢–µ–ª–µ—Ñ–æ–Ω</span>
              <span class="info-value">${d.phone}</span>
            </div>
          </div>

          <div class="section">
            <div class="section-title">üõí –°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞</div>
            <div class="order-items">
              ${d.items.map(item => `
                <div class="order-item">
                  <div>
                    <div class="item-name">${item.name}</div>
                    <div class="item-quantity">√ó ${item.quantity}</div>
                  </div>
                  <div class="item-price">${item.price} ‚ÇΩ</div>
                </div>
              `).join('')}
            </div>
            <div class="info-row" style="margin-top: 15px; padding-top: 15px; border-top: 2px solid #e0e0e0;">
              <span class="info-label" style="font-weight: 600;">–ò—Ç–æ–≥–æ</span>
              <span class="info-value" style="font-size: 18px; color: #2196F3;">${d.total} ‚ÇΩ</span>
            </div>
          </div>

          <div class="section">
            <div class="section-title">üó∫Ô∏è –ö–∞—Ä—Ç–∞</div>
            <div class="map-placeholder">
              –ö–∞—Ä—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Ä—Ç–∞–º–∏)
            </div>
          </div>
        </div>

        <div class="actions">
          ${d.status === 'new' ? `
            <button class="btn btn-primary" onclick="assignDelivery()">
              üë§ –ù–∞–∑–Ω–∞—á–∏—Ç—å –∫—É—Ä—å–µ—Ä–∞
            </button>
          ` : ''}
          ${d.status === 'assigned' ? `
            <button class="btn btn-primary" onclick="startDelivery()">
              üöö –ù–∞—á–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É
            </button>
          ` : ''}
          ${d.status === 'in_transit' ? `
            <button class="btn btn-success" onclick="completeDelivery()">
              ‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É
            </button>
          ` : ''}
          ${['new', 'assigned'].includes(d.status) ? `
            <button class="btn btn-danger" onclick="cancelDelivery()">
              ‚ùå –û—Ç–º–µ–Ω–∏—Ç—å
            </button>
          ` : ''}
        </div>
      `;
    }

    function getStatusName(status) {
      const names = {
        new: '–ù–æ–≤—ã–π',
        assigned: '–ù–∞–∑–Ω–∞—á–µ–Ω',
        in_transit: '–í –ø—É—Ç–∏',
        delivered: '–î–æ—Å—Ç–∞–≤–ª–µ–Ω',
        cancelled: '–û—Ç–º–µ–Ω–µ–Ω'
      };
      return names[status] || status;
    }

    function updateStats() {
      document.getElementById('stat-new').textContent =
        deliveries.filter(d => d.status === 'new').length;
      document.getElementById('stat-active').textContent =
        deliveries.filter(d => ['assigned', 'in_transit'].includes(d.status)).length;
      document.getElementById('stat-completed').textContent =
        deliveries.filter(d => d.status === 'delivered').length;
      document.getElementById('stat-cancelled').textContent =
        deliveries.filter(d => d.status === 'cancelled').length;
    }

    // –î–µ–π—Å—Ç–≤–∏—è —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π
    function assignDelivery() {
      if (!selectedDelivery) return;
      selectedDelivery.status = 'assigned';
      selectedDelivery.courier = `–ö—É—Ä—å–µ—Ä ${Math.floor(Math.random() * 5) + 1}`;
      renderDeliveries();
      renderDetails();
      updateStats();
      showNotification('–ö—É—Ä—å–µ—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É');
    }

    function startDelivery() {
      if (!selectedDelivery) return;
      selectedDelivery.status = 'in_transit';
      renderDeliveries();
      renderDetails();
      updateStats();
      showNotification('–î–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞—á–∞–ª–∞—Å—å');
    }

    function completeDelivery() {
      if (!selectedDelivery) return;
      selectedDelivery.status = 'delivered';
      renderDeliveries();
      renderDetails();
      updateStats();
      showNotification('–î–æ—Å—Ç–∞–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!');
    }

    function cancelDelivery() {
      if (!selectedDelivery) return;
      if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å —ç—Ç—É –¥–æ—Å—Ç–∞–≤–∫—É?')) {
        selectedDelivery.status = 'cancelled';
        renderDeliveries();
        renderDetails();
        updateStats();
        showNotification('–î–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞');
      }
    }

    function showNotification(message) {
      // –ü—Ä–æ—Å—Ç–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ toast notification)
      alert(message);
    }
  </script>
</body>
</html>
