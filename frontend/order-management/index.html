<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–û–±—Ä–∞–±–æ—Ç–∫–∞ –ó–∞–∫–∞–∑–æ–≤ - Food Flow</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f5f5f5;
      color: #333;
      overflow: hidden;
    }

    .container {
      display: flex;
      height: 100vh;
    }

    /* –ö–æ–ª–æ–Ω–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ */
    .status-column {
      flex: 1;
      background: #fafafa;
      border-right: 1px solid #e0e0e0;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .status-column:last-child {
      border-right: none;
    }

    .column-header {
      padding: 16px;
      font-weight: 600;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid;
    }

    .column-header.new {
      background: #FFF3E0;
      color: #E65100;
      border-bottom-color: #FF9800;
    }

    .column-header.accepted {
      background: #E3F2FD;
      color: #0D47A1;
      border-bottom-color: #2196F3;
    }

    .column-header.cooking {
      background: #F3E5F5;
      color: #4A148C;
      border-bottom-color: #9C27B0;
    }

    .column-header.ready {
      background: #E8F5E9;
      color: #1B5E20;
      border-bottom-color: #4CAF50;
    }

    .column-header.delivering {
      background: #E1F5FE;
      color: #01579B;
      border-bottom-color: #03A9F4;
    }

    .order-count {
      background: white;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 700;
    }

    .orders-list {
      flex: 1;
      overflow-y: auto;
      padding: 12px;
    }

    .order-card {
      background: white;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 12px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: all 0.2s;
      border-left: 4px solid;
    }

    .order-card.new { border-left-color: #FF9800; }
    .order-card.accepted { border-left-color: #2196F3; }
    .order-card.cooking { border-left-color: #9C27B0; }
    .order-card.ready { border-left-color: #4CAF50; }
    .order-card.delivering { border-left-color: #03A9F4; }

    .order-card:hover {
      transform: translateX(4px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }

    .order-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .order-number {
      font-size: 16px;
      font-weight: 700;
      color: #2196F3;
    }

    .order-time {
      font-size: 11px;
      color: #666;
      background: #f0f0f0;
      padding: 3px 8px;
      border-radius: 10px;
    }

    .order-customer {
      font-size: 13px;
      margin-bottom: 6px;
      color: #333;
    }

    .order-items {
      font-size: 12px;
      color: #666;
      margin-bottom: 8px;
    }

    .order-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 8px;
      border-top: 1px solid #f0f0f0;
    }

    .order-total {
      font-size: 16px;
      font-weight: 700;
      color: #4CAF50;
    }

    .order-actions {
      display: flex;
      gap: 6px;
    }

    .action-btn {
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-accept {
      background: #2196F3;
      color: white;
    }

    .btn-accept:hover {
      background: #1976D2;
    }

    .btn-cook {
      background: #9C27B0;
      color: white;
    }

    .btn-cook:hover {
      background: #7B1FA2;
    }

    .btn-ready {
      background: #4CAF50;
      color: white;
    }

    .btn-ready:hover {
      background: #388E3C;
    }

    .btn-deliver {
      background: #03A9F4;
      color: white;
    }

    .btn-deliver:hover {
      background: #0288D1;
    }

    .btn-cancel {
      background: #F44336;
      color: white;
    }

    .btn-cancel:hover {
      background: #D32F2F;
    }

    /* Order Detail Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      border-radius: 16px;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      padding: 24px;
      background: #2196F3;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: 16px 16px 0 0;
    }

    .modal-title {
      font-size: 24px;
      font-weight: 700;
    }

    .close-modal {
      background: none;
      border: none;
      color: white;
      font-size: 32px;
      cursor: pointer;
      line-height: 1;
    }

    .modal-body {
      padding: 24px;
    }

    .detail-section {
      margin-bottom: 24px;
    }

    .section-title {
      font-size: 14px;
      font-weight: 600;
      color: #666;
      text-transform: uppercase;
      margin-bottom: 12px;
    }

    .detail-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .detail-row:last-child {
      border-bottom: none;
    }

    .detail-label {
      color: #666;
      font-size: 14px;
    }

    .detail-value {
      color: #333;
      font-weight: 500;
      font-size: 14px;
    }

    .item-list {
      margin-top: 12px;
    }

    .item-row {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background: #f9f9f9;
      border-radius: 6px;
      margin-bottom: 8px;
    }

    .item-info {
      flex: 1;
    }

    .item-name {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .item-qty {
      font-size: 12px;
      color: #666;
    }

    .item-price {
      font-size: 14px;
      font-weight: 700;
      color: #4CAF50;
    }

    /* Header */
    .app-header {
      background: white;
      padding: 16px 24px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .app-title {
      font-size: 20px;
      font-weight: 700;
      color: #2196F3;
    }

    .header-stats {
      display: flex;
      gap: 24px;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-size: 24px;
      font-weight: 700;
      color: #2196F3;
    }

    .stat-label {
      font-size: 11px;
      color: #666;
      text-transform: uppercase;
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    ::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 3px;
    }
  </style>
</head>
<body>
  <div class="app-header">
    <div class="app-title">üìã –û–±—Ä–∞–±–æ—Ç–∫–∞ –ó–∞–∫–∞–∑–æ–≤</div>
    <div class="header-stats">
      <div class="stat">
        <div class="stat-value" id="totalOrders">0</div>
        <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="activeOrders">0</div>
        <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="totalRevenue">0‚ÇΩ</div>
        <div class="stat-label">–í—ã—Ä—É—á–∫–∞</div>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- –ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã -->
    <div class="status-column">
      <div class="column-header new">
        –ù–æ–≤—ã–µ
        <span class="order-count" id="newCount">0</span>
      </div>
      <div class="orders-list" id="newOrders"></div>
    </div>

    <!-- –ü—Ä–∏–Ω—è—Ç—ã–µ -->
    <div class="status-column">
      <div class="column-header accepted">
        –ü—Ä–∏–Ω—è—Ç—ã–µ
        <span class="order-count" id="acceptedCount">0</span>
      </div>
      <div class="orders-list" id="acceptedOrders"></div>
    </div>

    <!-- –ì–æ—Ç–æ–≤—è—Ç—Å—è -->
    <div class="status-column">
      <div class="column-header cooking">
        –ì–æ—Ç–æ–≤—è—Ç—Å—è
        <span class="order-count" id="cookingCount">0</span>
      </div>
      <div class="orders-list" id="cookingOrders"></div>
    </div>

    <!-- –ì–æ—Ç–æ–≤—ã -->
    <div class="status-column">
      <div class="column-header ready">
        –ì–æ—Ç–æ–≤—ã
        <span class="order-count" id="readyCount">0</span>
      </div>
      <div class="orders-list" id="readyOrders"></div>
    </div>

    <!-- –î–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è -->
    <div class="status-column">
      <div class="column-header delivering">
        –î–æ—Å—Ç–∞–≤–∫–∞
        <span class="order-count" id="deliveringCount">0</span>
      </div>
      <div class="orders-list" id="deliveringOrders"></div>
    </div>
  </div>

  <!-- Order Detail Modal -->
  <div class="modal" id="orderModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title" id="modalOrderNumber">–ó–∞–∫–∞–∑ #ORD-1234</div>
        <button class="close-modal" onclick="closeModal()">√ó</button>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
      </div>
    </div>
  </div>

  <script>
    let orders = [];
    let selectedOrder = null;

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    document.addEventListener('DOMContentLoaded', () => {
      loadOrders();
      setInterval(loadOrders, 5000); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
    });

    // –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤
    function loadOrders() {
      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ API)
      if (orders.length === 0) {
        orders = generateMockOrders();
      }
      renderOrders();
      updateStats();
    }

    function generateMockOrders() {
      const statuses = ['new', 'accepted', 'cooking', 'ready', 'delivering'];
      const names = ['–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤', '–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞', '–ê–ª–µ–∫—Å–µ–π –ö–æ–∑–ª–æ–≤'];

      return Array.from({ length: 15 }, (_, i) => ({
        id: `ORD-${1000 + i}`,
        status: statuses[Math.floor(Math.random() * statuses.length)],
        customer: {
          name: names[Math.floor(Math.random() * names.length)],
          phone: '+7 (999) 123-45-67',
          address: `—É–ª. –ü—É—à–∫–∏–Ω–∞, –¥. ${10 + i}, –∫–≤. ${i + 1}`
        },
        items: [
          { name: '–ü–∏—Ü—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞', quantity: 1, price: 450 },
          { name: 'Coca-Cola 0.5–ª', quantity: 2, price: 120 }
        ],
        subtotal: 690,
        deliveryFee: 200,
        total: 890,
        createdAt: new Date(Date.now() - Math.random() * 3600000),
        comment: i % 3 === 0 ? '–ù–µ –∑–≤–æ–Ω–∏—Ç—å –≤ –¥–≤–µ—Ä—å' : ''
      }));
    }

    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
    function renderOrders() {
      const statuses = ['new', 'accepted', 'cooking', 'ready', 'delivering'];

      statuses.forEach(status => {
        const filtered = orders.filter(o => o.status === status);
        const container = document.getElementById(`${status}Orders`);
        const countEl = document.getElementById(`${status}Count`);

        countEl.textContent = filtered.length;

        container.innerHTML = filtered.map(order => `
          <div class="order-card ${order.status}" onclick="openOrderDetail('${order.id}')">
            <div class="order-header">
              <div class="order-number">${order.id}</div>
              <div class="order-time">${getTimeAgo(order.createdAt)}</div>
            </div>
            <div class="order-customer">
              üë§ ${order.customer.name}
            </div>
            <div class="order-items">
              ${order.items.map(item => `${item.name} √ó ${item.quantity}`).join(', ')}
            </div>
            <div class="order-footer">
              <div class="order-total">${order.total} ‚ÇΩ</div>
              <div class="order-actions">
                ${getActionButtons(order)}
              </div>
            </div>
          </div>
        `).join('');
      });
    }

    // –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
    function getActionButtons(order) {
      const buttons = {
        new: `<button class="action-btn btn-accept" onclick="event.stopPropagation(); changeStatus('${order.id}', 'accepted')">–ü—Ä–∏–Ω—è—Ç—å</button>
              <button class="action-btn btn-cancel" onclick="event.stopPropagation(); changeStatus('${order.id}', 'cancelled')">√ó</button>`,
        accepted: `<button class="action-btn btn-cook" onclick="event.stopPropagation(); changeStatus('${order.id}', 'cooking')">–í —Ä–∞–±–æ—Ç—É</button>`,
        cooking: `<button class="action-btn btn-ready" onclick="event.stopPropagation(); changeStatus('${order.id}', 'ready')">–ì–æ—Ç–æ–≤–æ</button>`,
        ready: `<button class="action-btn btn-deliver" onclick="event.stopPropagation(); changeStatus('${order.id}', 'delivering')">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>`,
        delivering: ``
      };
      return buttons[order.status] || '';
    }

    // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
    function changeStatus(orderId, newStatus) {
      const order = orders.find(o => o.id === orderId);
      if (order) {
        order.status = newStatus;
        renderOrders();
        updateStats();

        // –ó–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å API –∑–∞–ø—Ä–æ—Å
        console.log(`–ó–∞–∫–∞–∑ ${orderId} -> ${newStatus}`);
      }
    }

    // –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª–µ–π –∑–∞–∫–∞–∑–∞
    function openOrderDetail(orderId) {
      selectedOrder = orders.find(o => o.id === orderId);
      if (!selectedOrder) return;

      document.getElementById('modalOrderNumber').textContent = `–ó–∞–∫–∞–∑ ${selectedOrder.id}`;
      document.getElementById('modalBody').innerHTML = `
        <div class="detail-section">
          <div class="section-title">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ</div>
          <div class="detail-row">
            <span class="detail-label">–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞</span>
            <span class="detail-value">${selectedOrder.id}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">–°—Ç–∞—Ç—É—Å</span>
            <span class="detail-value">${getStatusName(selectedOrder.status)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">–í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è</span>
            <span class="detail-value">${selectedOrder.createdAt.toLocaleString('ru-RU')}</span>
          </div>
        </div>

        <div class="detail-section">
          <div class="section-title">–ö–ª–∏–µ–Ω—Ç</div>
          <div class="detail-row">
            <span class="detail-label">–ò–º—è</span>
            <span class="detail-value">${selectedOrder.customer.name}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">–¢–µ–ª–µ—Ñ–æ–Ω</span>
            <span class="detail-value">${selectedOrder.customer.phone}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">–ê–¥—Ä–µ—Å</span>
            <span class="detail-value">${selectedOrder.customer.address}</span>
          </div>
        </div>

        <div class="detail-section">
          <div class="section-title">–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞</div>
          <div class="item-list">
            ${selectedOrder.items.map(item => `
              <div class="item-row">
                <div class="item-info">
                  <div class="item-name">${item.name}</div>
                  <div class="item-qty">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${item.quantity}</div>
                </div>
                <div class="item-price">${item.price * item.quantity} ‚ÇΩ</div>
              </div>
            `).join('')}
          </div>
        </div>

        <div class="detail-section">
          <div class="section-title">–ò—Ç–æ–≥–æ</div>
          <div class="detail-row">
            <span class="detail-label">–¢–æ–≤–∞—Ä—ã</span>
            <span class="detail-value">${selectedOrder.subtotal} ‚ÇΩ</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">–î–æ—Å—Ç–∞–≤–∫–∞</span>
            <span class="detail-value">${selectedOrder.deliveryFee} ‚ÇΩ</span>
          </div>
          <div class="detail-row" style="border-top: 2px solid #e0e0e0; padding-top: 12px; margin-top: 8px;">
            <span class="detail-label" style="font-weight: 700;">–í—Å–µ–≥–æ</span>
            <span class="detail-value" style="font-size: 18px; color: #4CAF50; font-weight: 700;">${selectedOrder.total} ‚ÇΩ</span>
          </div>
        </div>

        ${selectedOrder.comment ? `
          <div class="detail-section">
            <div class="section-title">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</div>
            <div style="padding: 12px; background: #fff3cd; border-radius: 6px; color: #856404;">
              ${selectedOrder.comment}
            </div>
          </div>
        ` : ''}
      `;

      document.getElementById('orderModal').classList.add('active');
    }

    function closeModal() {
      document.getElementById('orderModal').classList.remove('active');
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    function updateStats() {
      document.getElementById('totalOrders').textContent = orders.length;
      document.getElementById('activeOrders').textContent =
        orders.filter(o => !['cancelled', 'delivered'].includes(o.status)).length;
      document.getElementById('totalRevenue').textContent =
        orders.reduce((sum, o) => sum + o.total, 0) + '‚ÇΩ';
    }

    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
    function getTimeAgo(date) {
      const seconds = Math.floor((new Date() - date) / 1000);
      if (seconds < 60) return `${seconds}—Å –Ω–∞–∑–∞–¥`;
      const minutes = Math.floor(seconds / 60);
      if (minutes < 60) return `${minutes}–º –Ω–∞–∑–∞–¥`;
      const hours = Math.floor(minutes / 60);
      return `${hours}—á –Ω–∞–∑–∞–¥`;
    }

    function getStatusName(status) {
      const names = {
        new: '–ù–æ–≤—ã–π',
        accepted: '–ü—Ä–∏–Ω—è—Ç',
        cooking: '–ì–æ—Ç–æ–≤–∏—Ç—Å—è',
        ready: '–ì–æ—Ç–æ–≤',
        delivering: '–î–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è',
        delivered: '–î–æ—Å—Ç–∞–≤–ª–µ–Ω',
        cancelled: '–û—Ç–º–µ–Ω–µ–Ω'
      };
      return names[status] || status;
    }

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ
    document.getElementById('orderModal').addEventListener('click', (e) => {
      if (e.target.id === 'orderModal') closeModal();
    });
  </script>
</body>
</html>
